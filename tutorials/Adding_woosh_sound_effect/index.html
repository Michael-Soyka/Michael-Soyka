<!DOCTYPE html>
<html>
<head>
	<title>Adding woosh sound effect</title>
	<meta property="og:title" content="Adding woosh sound effect">
	<meta name="author" content="M. Soyka">
	<meta property="og:locale" content="ru_RU">
	<meta property="og:site_name" content="Adding woosh sound effect">
	<meta name="twitter:card" content="summary">
	<meta property="twitter:title" content="Adding woosh sound effect">

	<link rel="stylesheet" href="css/main.css">
	
</head>
<body>

	<div class="lang-swith"><a href="./index_en.html">üá¨üáß English</a></div>
	<div class="global-block">
		<div class="middle-block">
			<div id="header">
			</div>
			<p>–î–æ–±–∞–≤–ª–µ–Ω–∏–µ woosh</p>

			<div id="text">
				–û—Ç–∫—Ä—ã–≤–∞–µ–º hl2_player.cpp<br>
				–í–ø–∏—Å—ã–≤–∞–µ–º –Ω–∞–¥ "DEFINE_SOUNDPATCH( m_sndLeeches ),"
				<div id="text-command">
                    <div id="text-command-div">DEFINE_SOUNDPATCH(m_pWooshSound),</div>
                </div>
				–î–æ–±–∞–≤–∏–º –µ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤ —Ö—ç–¥–µ—Ä "hl2_player.h". –û–±—ä—è–≤–∏—Ç–µ –Ω–∞—à "m_pWooshSound" –≤ —Ä–∞–∑–¥–µ–ª–µ "private:"
				<div id="text-command">
                    <div id="text-command-div">CSoundPatch		*m_pWooshSound;</div>
                </div>
				–ü–æ–¥–≥–æ—Ç–æ–≤–∏–º –º–µ—Å—Ç–æ –ø–æ–¥ –Ω–∞—à–∏ —Ñ—É–Ω–∫—Ü–∏–∏. –í —Ö—ç–¥–µ—Ä "hl2_player.h" –Ω–∏–∂–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Ç–∏–ø–∞ "OnRestore();" –ø–∏—à–µ–º
				<div id="text-command">
                    <div id="text-command-div">
virtual void		CreateSounds(void);
void				UpdateWoosh(void);
</div>
                </div>
				–¢–µ–ø–µ—Ä—å –ø—Ä—è–º–æ –Ω–∞–¥ "void CHL2_Player::StopLoopingSounds( void )" –≤–ø–∏—Å—ã–≤–∞–µ–º<br>
				<div id="text-command">
                    <div id="text-command-div">
//-----------------------------------------------------------------------------
// Creating Sound
//-----------------------------------------------------------------------------

void CHL2_Player::CreateSounds()
{
	if (!m_pWooshSound)
	{
		CSoundEnvelopeController &controller = CSoundEnvelopeController::GetController();
		CPASAttenuationFilter filter(this);
		m_pWooshSound = controller.SoundCreate(filter, entindex(), "HL2Player.Woosh");
		controller.Play(m_pWooshSound, 0, 100);
	}					
}
</div>
                </div>
				–¢–µ–ø–µ—Ä—å –∑–∞—Å—Ç–∞–≤–ª—è–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞—à "CreateSounds". –í–Ω—É—Ç—Ä–∏ "Spawn(void)" –Ω–∏–∂–µ "BaseClass::Spawn();" –¥–æ–±–∞–≤–ª—è–µ–º<br>
				<div id="text-command">
                    <div id="text-command-div">CreateSounds();</div>
                </div>
				–ò —Ç–µ–ø–µ—Ä—å –¥–µ–ª–∞–µ–º –ø—Ä–µ-–∫—ç—à –∑–≤—É–∫–∞. –í–Ω—É—Ç—Ä–∏ "void CHL2_Player::Precache( void )" –ø–∏—à–µ–º
				<div id="text-command">
                    <div id="text-command-div">PrecacheScriptSound("HL2Player.Woosh");</div>
                </div>
				(–≠—Ç–æ–≥–æ –Ω–µ–±—ã–ª–æ –≤ –≤–∏–¥–µ–æ) –ù–µ –∑–∞–±—ã–≤–∞–µ–º –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –Ω–∞—à –∑–≤—É–∫.<br>
				–í–Ω—É—Ç—Ä–∏ "void CHL2_Player::StopLoopingSounds( void )" –≤ —Å–∞–º–æ–º –Ω–∞—á–∞–ª–µ –≤–ø–∏—Å—ã–≤–∞–µ–º
				<div id="text-command">
                    <div id="text-command-div">
if (m_pWooshSound)
{
	CSoundEnvelopeController &controller = CSoundEnvelopeController::GetController();
	controller.SoundDestroy(m_pWooshSound);
	m_pWooshSound = NULL;
}
</div>
                </div>
				–î–æ–±–∞–≤–ª—è–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥—Ä–æ–º–∫–æ—Å—Ç–∏ –Ω–∞—à–µ–≥–æ –∑–≤—É–∫–∞<br>
				<div id="text-command">
                    <div id="text-command-div">
void CHL2_Player::UpdateWoosh(void)
{
	if (m_pWooshSound)
	{
		CSoundEnvelopeController &controller = CSoundEnvelopeController::GetController();
		float fWooshVol = GetAbsVelocity().Length() - MIN_WOOSH_SPEED;
		if (fWooshVol < 0.0f)
		{
			controller.SoundChangeVolume(m_pWooshSound, 0.0f, 0.1f);
			return;
		}

		fWooshVol /= 2000.0f;
		if (fWooshVol > 1.0f)
			fWooshVol = 1.0f;

		controller.SoundChangeVolume(m_pWooshSound, fWooshVol, 0.1f);
	}
}
</div>
				</div>
				–¢–µ–ø–µ—Ä—å –∑–∞—Å—Ç–∞–≤–ª—è–µ–º –µ–≥–æ —Ä–∞–±–æ—Ç–∞—Ç—å. –í–Ω—É—Ç—Ä–∏ "void CHL2_Player::PostThink( void )" –ø–∏—à–µ–º  
				<div id="text-command">
                    <div id="text-command-div">UpdateWoosh();</div>
                </div>
				–¢–∞–∫–∂–µ –Ω—É–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –Ω–∞—à "MIN_WOOSH_SPEED". –û—Ç–∫—Ä—ã–≤–∞–µ–º —Ö—ç–¥–µ—Ä "hl2_shareddefs.h" –∏ –≤–ø–∏—Å—ã–≤–∞–µ–º 
				<div id="text-command">
                    <div id="text-command-div">#define MIN_FLING_SPEED 750</div>
                </div>
				–ù–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ —Å –∫–æ–¥–æ–º –ø–æ–∫–æ–Ω—á–µ–Ω–æ. –ö–æ–º–ø–∏–ª–∏—Ä—É–µ–º –∏ –ø—Ä–∏—Å—Ç—É–ø–∞–µ–º –∫ —Å–∞–º–æ–π –∏–≥—Ä–µ.<br>
				–ü–æ—Å–ª–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –ø–µ—Ä–µ–∫–∏–¥—ã–≤–∞–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ client –∏ server –≤ –Ω–∞—à –º–æ–¥.<br>
				–°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é sound –∏ –∫–ª–∞–¥–µ–º —Ç—É–¥–∞ –Ω–∞—à —Ñ–∞–π–ª —Å–æ <a target="_blank" rel="noopener noreferrer" href="https://raw.githubusercontent.com/Michael-Soyka/Michael-Soyka/main/tutorials/Adding_woosh_sound_effect/files/woosh.wav">–∑–≤—É–∫–æ–º –≤–µ—Ç—Ä–∞</a>.<br>
				–î–∞–ª–µ–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ "scripts" —Å–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª "game_sounds_mymod.txt" –∏ –≤–ø–∏—Å—ã–≤–∞–µ–º –≤ –Ω–µ–≥–æ
				<div id="text-command">
                    <div id="text-command-div">
"HL2Player.Woosh"
{
	"channel" "CHAN_STATIC"
	"volume" "1.00"
	"soundlevel" "SNDLVL_85dB"
	"pitch" "100"
	"wave" "woosh.wav"	
}
</div>
				</div>
				–î–∞–ª–µ–µ, –≤–∞–º –Ω—É–∂–µ–Ω —Ñ–∞–π–ª "game_sounds_manifest.txt" –æ—Ç —Ç–æ–π –∏–≥—Ä—ã –ø–æ–¥ –∫–æ—Ç–æ—Ä—É—é –≤—ã –¥–µ–ª–∞–µ—Ç–µ –≤–∞—à –º–æ–¥, –≤ –º–æ–µ–π —Å–ª—É—á–∞–µ —ç—Ç–æ "HL2:EP2" –∏ —Ñ–∞–π–ª —è –±–µ—Ä—É –µ–≥–æ –æ—Ç —Ç—É–¥–∞. <br>
				–î–æ–±–∞–≤–ª—è–µ–º –≤ —ç—Ç–æ—Ç —Ñ–∞–π–ª –ø—Ä–µ-–∫—ç—à –Ω–∞—à–µ–≥–æ –Ω–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞ —Å–æ –∑–≤—É–∫–∞–º–∏.
				<div id="text-command">
                    <div id="text-command-div">	"precache_file"		"scripts/game_sounds_mymod.txt"</div>
                </div>
				–ù–∞ —ç—Ç–æ–º –≤—Å–µ.
			</div>
		</div>
	</div>
</body>
</html>